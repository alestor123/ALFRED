<%
let message = `🎓 *KTU ANNOUNCEMENTS* 🎓\n`;
message += `━━━━━━━━━━━━━━━\n\n`;

announcements.forEach((announcement, index) => {
    // Add a divider between announcements
    if (index > 0) {
        message += `┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄\n\n`;
    }
    
    // Announcement number and title with graduation cap
    message += `${index + 1}. 📜 *${announcement.title}*\n\n`;
    
    // Date with calendar emoji
    message += `📅 *Date:* ${announcement.date}\n\n`;
    
    // Content with memo emoji and proper formatting
    const formattedContent = announcement.content
        .replace(/\s+/g, ' ')
        .trim();
    message += `📋 *Details:*\n${formattedContent}\n\n`;
    
    // Download link with fancy formatting
    if (announcement.downloadLink) {
        message += `📎 *Attachment:* [Click here to download](${announcement.downloadLink})\n`;
    }
});

// Footer with divider and website link
message += `\n━━━━━━━━━━━━━━━\n`;
message += `🌐 *View on KTU Website:*\n`;
message += `https://ktu.edu.in/Menu/announcements\n\n`;

// Add cache status
message += `⏰ Last updated: ${new Date().toLocaleString('en-US', { 
    timeZone: 'Asia/Kolkata',
    day: '2-digit',
    month: 'short',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
    hour12: true 
})} IST\n`;

if (fromCache) {
    message += `\n💾 *Using cached data.* Click 🔄 to refresh.`;
} else {
    message += `\n✨ *Fresh data from KTU website.*`;
}
%><%= message %> 