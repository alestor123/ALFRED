<%
let message = `ðŸŽ“ *KTU ANNOUNCEMENTS* ðŸŽ“\n`;
message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n`;

announcements.forEach((announcement, index) => {
    // Add a divider between announcements
    if (index > 0) {
        message += `â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„\n\n`;
    }
    
    // Announcement number and title with graduation cap
    message += `${index + 1}. ðŸ“œ *${announcement.title}*\n\n`;
    
    // Date with calendar emoji
    message += `ðŸ“… *Date:* ${announcement.date}\n\n`;
    
    // Content with memo emoji and proper formatting
    const formattedContent = announcement.content
        .replace(/\s+/g, ' ')
        .trim();
    message += `ðŸ“‹ *Details:*\n${formattedContent}\n\n`;
    
    // Download link with fancy formatting
    if (announcement.downloadLink) {
        message += `ðŸ“Ž *Attachment:* [Click here to download](${announcement.downloadLink})\n`;
    }
});

// Footer with divider and website link
message += `\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
message += `ðŸŒ *View on KTU Website:*\n`;
message += `https://ktu.edu.in/Menu/announcements\n\n`;

// Add cache status
message += `â° Last updated: ${new Date().toLocaleString('en-US', { 
    timeZone: 'Asia/Kolkata',
    day: '2-digit',
    month: 'short',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
    hour12: true 
})} IST\n`;

if (fromCache) {
    message += `\nðŸ’¾ *Using cached data.* Click ðŸ”„ to refresh.`;
} else {
    message += `\nâœ¨ *Fresh data from KTU website.*`;
}
%><%= message %> 